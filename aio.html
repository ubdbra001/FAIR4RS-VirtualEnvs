<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Reproducible Computational Environments - Virtual Environments: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css">
<script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" href="assets/images/UOSSheild_Primary_Violet_RGB.ico" sizes="any">
<link rel="icon" href="assets/images/UOSSheild_Primary_Violet_RGB.svg" type="image/svg+xml">
<link rel="manifest" href="site.webmanifest">
<link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <a href="https://www.sheffield.ac.uk" class="external-link">
          <img alt="University of Sheffield" src="assets/images/UOSLogo_Primary_Violet_RGB.svg" class="light-only"><img alt="University of Sheffield" src="assets/images/UOSLogo_Primary_White_RGB.svg" class="dark-only"></a>

        <span class="badge text-bg-danger">
          <abbr title="This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.">
            <a href="https://cdh.carpentries.org/the-lesson-life-cycle.html#early-development-pre-alpha-through-alpha" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
              Pre-Alpha
            </a>
            <span class="visually-hidden">This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/aio.html';">Instructor View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="University of Sheffield" src="assets/images/UOSSheild_Primary_Violet_RGB.svg">
</div>
    <div class="lesson-title-md">
      Reproducible Computational Environments - Virtual Environments
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Reproducible Computational Environments - Virtual Environments
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<li><a class="dropdown-item" href="acknowledgements.html">Acknowledgements</a></li>
<li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Reproducible Computational Environments - Virtual Environments
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/aio.html">Instructor View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-comp-repro.html">1. What is Computational Reprodicibility?</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-what-are-venvs.html">2. Capturing computational environments</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-using-venvs.html">3. Getting started with <code>venv</code>and <code>pip</code></a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-gen-reqs.html">4. Using <code>venv</code> and <code>pip</code> to capture a computational environment</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05-limitations.html">5. Limitations</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="acknowledgements.html">Acknowledgements</a></li>
<li><a href="reference.html">Reference</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-01-comp-repro"><p>Content from <a href="01-comp-repro.html">What is Computational Reprodicibility?</a></p>
<hr>
<p>Last updated on 2025-03-17 |

        <a href="https://github.com/ubdbra001/FAIR4RS-VirtualEnvs/edit/main/episodes/01-comp-repro.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is computational reproducibility?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn about computational reproducibility</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="making-your-results-and-code-reproducible">Making your results and code reproducible<a class="anchor" aria-label="anchor" href="#making-your-results-and-code-reproducible"></a>
</h2>
<hr class="half-width">
<p>You have just finished your latest research project. The paper has
been accepted by the journal (only minor revisions, yay!), the data is
organised and ready to be placed in a repository, and your code is under
version control and ready to be made public. So you’ve done everything
to make your results reproducible, right?</p>
<div id="discussion1" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Discussion</h3>
<div class="callout-content">
<p>Does simply providing your source code equate to
reproducibility?<br>
If it doesn’t, what do you think can go wrong?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li><p>The code won’t run</p></li>
<li><p>The code runs but doesn’t produce the same result</p></li>
</ol>
<p>Add research on this</p>
</div>
</div>
</div>
</div>
<p>Your code is just the tip of the pyramid of your computational
environment, and to ensure that your results are computationally
reproducible you will need to capture some of that computational
environment.</p>
</section><section><h2 class="section-heading" id="your-computational-environment">Your computational environment<a class="anchor" aria-label="anchor" href="#your-computational-environment"></a>
</h2>
<hr class="half-width">
<p>A simplified way to think about your computational environment is to
divide it into 5 layers, each with increasing generality:</p>
<figure><img src="files/CompEnvLayers.png" title="5 layers within a computational environment" class="figure mx-auto d-block"></figure><ol style="list-style-type: decimal">
<li>At the top is the most specific level: <strong>‘your code’</strong>.
This is the code that you produced to analyse your data and get the
final published result.<br>
</li>
<li>Below this is the <strong>‘packages’</strong> layer, containing the
packages you used within your code. These are also bundles of code, but
they serve a more general purpose, being used in mutliple different
pieces of (research) software. For example: <code>numpy</code>,
<code>pandas</code>, etc.<br>
</li>
<li>Next is the <strong>‘language’</strong> layer. This is the specific
programming language and version you used. Typically, both your code and
the packages you have used are written in this language, and it consists
of the language syntax as well as some built in packages (in some cases
called the standard library).<br>
</li>
<li>The next layer is the <strong>‘operating system’</strong> layer.
Which is a very simpified way of describing all the code that interacts
between the programming language you are using, and the actual
electronic hardware that makes up a computer.</li>
<li>Finally, you have the actual computer hardware.</li>
</ol></section><section><h2 class="section-heading" id="what-is-computational-reproducibility">What is computational reproducibility?<a class="anchor" aria-label="anchor" href="#what-is-computational-reproducibility"></a>
</h2>
<hr class="half-width">
<div id="discussion2" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Discussion</h3>
<div class="callout-content">
<p>How would you define computational reproducibility?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>A suggested definition:<br>
Computational reproducibility is the degree to which your code can be
run in a different computational context (i.e. either by a different
person, at a different time, on a different machine, or any combination
of these three) and will produce the same or equivalent outcome.</p>
</div>
</div>
</div>
</div>
<p>What counts as the same or equivalent will vary between research
contexts. In some cases precise byte-for-byte reproducibility is
essential, while in others getting results that fall in the same range
will be suitable.</p>
<p>The more layers of your computational environment that you are able
to capture (going from the top to the bottom layer), the more
reproducible your results will be. Although this is accompanied by
increasing technical complexity, so choosing the right degree of
computational reproducibility for your project is key.</p>
<p>In the next section we’ll look in a bit more detail about package
managers, virtual environments, and how we can use them in conjunction
to capture the ‘packages’ layer of a computational environment.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Typically, simply providing your source code does not allow other to
reproduce your work.</li>
<li>Computational reproducibility is the degree to which code can be run
in a different context.</li>
<li>Improving computational reproducibility relies on capturing
information about your computational environment.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-02-what-are-venvs"><p>Content from <a href="02-what-are-venvs.html">Capturing computational environments</a></p>
<hr>
<p>Last updated on 2025-03-17 |

        <a href="https://github.com/ubdbra001/FAIR4RS-VirtualEnvs/edit/main/episodes/02-what-are-venvs.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is a package manager?</li>
<li>What are virtual environments?</li>
<li>How can we use them to capture information about a specific
computational environment</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Develop conceptual understanding of virtual environments</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Now you have a better idea of the challenges around computational
reproducibility let’s look at how Package Managers and Virtual
Environments can be used in conjunction to capture the ‘packages’ layer
of your project’s computational environment.</p>
<figure><img src="files/PackageLayerCapture.png" class="figure mx-auto d-block"></figure><section><h2 class="section-heading" id="what-is-a-package-manager">What is a Package Manager?<a class="anchor" aria-label="anchor" href="#what-is-a-package-manager"></a>
</h2>
<hr class="half-width">
<p>As the name suggests, a Package Manager is a tool used for adding,
remove, upgrade, and keeping track of the packages installed for a
particular piece of software (including programming languages). As part
of this course we will be using Python, and so we will be using Python’s
built in package manager: <code>pip</code></p>
<p>In the context of your code, the packages you install are also known
as the dependencies for your code (i.e. your code depends on these
packages being available to work). The packages you install will also
have their own dependencies, and these dependencies may have their own
dependencies. Generally this is not something you need to worry about,
because as part of the installation process the package manager will
work out the dependencies of all the packages that need to be installed
(a process called <em>dependency resolution</em>), and then install them
for you.</p>
<div id="for-example" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="for-example" class="callout-inner">
<h3 class="callout-title">For example:</h3>
<div class="callout-content">
<p>You want to install the <code>pandas</code> package. When you do
<code>pip</code> will see that one of the dependencies of
<code>pandas</code> is the <code>numpy</code> package.<br>
So when you install <code>pandas</code>, <code>pip</code> will also
install <code>numpy</code> for you.</p>
</div>
</div>
</div>
<p>Package mangers will also keep track of the specific versions of the
packages installed for a project, and can produce files allowing this
information to be shared. This functionality is a key part of capturing
a specific computational environment and we’ll return to it later.</p>
<div id="accordionSpoiler1" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler1" aria-expanded="false" aria-controls="collapseSpoiler1">
  <h3 class="accordion-header" id="headingSpoiler1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Show details </h3>
</button>
<div id="collapseSpoiler1" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler1" aria-labelledby="headingSpoiler1">
<div class="accordion-body">
<p>You can learn more about Python packages and how to make one in the
<a href="https://christopher-wild.github.io/FAIR4RS-Packaging/index.html" class="external-link">FAIR4RS
Packaging lesson</a></p>
</div>
</div>
</div>
</div>
<div id="where-does-pip-get-packages-from" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="where-does-pip-get-packages-from" class="callout-inner">
<h3 class="callout-title">Where does pip get packages from?</h3>
<div class="callout-content">
<p>When you install a package using <code>pip</code> it will typically
access the Python Package Index (PyPI) to download and install that
package.<br>
PyPI is an online repository of over 500,000 packages, and is the most
commonly used source for installing python packages.</p>
<p>It is also possible to install packages from local files, private
repositories, or even directly from Github repositories, but this is
outside the scope of this lesson.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="what-are-virtual-environments">What are Virtual Environments?<a class="anchor" aria-label="anchor" href="#what-are-virtual-environments"></a>
</h2>
<hr class="half-width">
<p>By default when you use <code>pip</code> to install a package it will
be installed in Python’s base environment, and so using <code>pip</code>
alone will result in different projects sharing the same space.</p>
<div id="discussion1" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Discussion</h3>
<div class="callout-content">
<p>Can you think of a few reasons why this may be a problem?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<ul>
<li>Different projects requiring different versions of the same package
(Dependency clashes)
<ul>
<li>Could be a package you use directly</li>
<li>Could also be a dependency of a package you use</li>
</ul>
</li>
<li>Difficulty identifying which packages are required for which
projects (Isolating dependencies)</li>
</ul>
</div>
</div>
</div>
</div>
<p>This diagram illustrates the situation:</p>
<figure><img src="files/BaseEnv.png" class="figure mx-auto d-block"></figure><ol style="list-style-type: decimal">
<li>In this example, ‘Project 1’ requires <code>numpy</code> v1.18 and
while ‘Project 2’ doesn’t directly require a conflicting version of
<code>numpy</code>, <code>pandas</code> requires at least v1.22. This
creates a dependency clash - You cannot have both versions of this
package installed in the same environment, so either:
<ul>
<li>You break the older project’s computational environment, or</li>
<li>You cannot develop your new code.</li>
</ul>
</li>
<li>If you manage to resolve the dependency clash, you still have the
issue that the additional dependencies (namely <code>pillow</code>) from
‘Project 1’ will also be captured as part of the computational
environment for ‘Project 2’. This <em>may</em> not cause any issues, but
it is generally not good practice:
<ul>
<li>When capturing information about the computational environment for a
project we only want to include exactly what is required for the
reproduction of that project.</li>
</ul>
</li>
</ol>
<p>Virtual environments are a tool designed to solve both of these
problems. Conceptually they work by creating a seperate, self-contained
space to install packages. Because these spaces are isolated from one
another you are able to install different versions of the same package
for different projects without creating dependency clashes. This
isolation between projects also allows you to accurately capture which
packages were used within a specific project, making it easier to
recreate that aspect of the computational environment in a different
context.</p>
<figure><img src="files/venvs.png" class="figure mx-auto d-block"></figure></section><section><h2 class="section-heading" id="capturing-the-packages-level-of-a-computational-environment">Capturing the ‘packages’ level of a computational environment<a class="anchor" aria-label="anchor" href="#capturing-the-packages-level-of-a-computational-environment"></a>
</h2>
<hr class="half-width">
<p>Now we’ve described Package managers and Virtual environments we can
outline the steps required to successfully capture the ‘packages’ layer
of a computational environment for a project:</p>
<ol style="list-style-type: decimal">
<li><p>Create a virtual environment for your project</p></li>
<li><p>Develop your project, installing packages into the virtual
environment as needed</p></li>
<li><p>Periodically recorded the packages installed in the environment,
ideally to a file alongside the code</p></li>
</ol>
<p>In the next section we’ll get to grips with using <code>pip</code>
and <code>venv</code>, and then move onto how to capture the ‘packages’
level of a computational environment using them.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Package Managers are used to install, remove, upgrade, and track
software.</li>
<li>In the context of Python and other programming languages this
software is bundles of other people’s code.</li>
<li>However, installing all packages to the same place causes dependency
clashes and makes recreating a computational environment difficult.</li>
<li>Virtual environments are used to deal with this problem by creating
isolated spaces where packages can be installed without interfering with
one another.</li>
<li>Using these two tools together allows capture of the ‘package’ level
of your computational environment</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-03-using-venvs"><p>Content from <a href="03-using-venvs.html">Getting started with venvand pip</a></p>
<hr>
<p>Last updated on 2025-03-17 |

        <a href="https://github.com/ubdbra001/FAIR4RS-VirtualEnvs/edit/main/episodes/03-using-venvs.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I create a venv?</li>
<li>How do I install packages into my new venv?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Create a new virtual environment</li>
<li>Learn how to activate and deactivate the virtual environment</li>
<li>Installing packages in your environment</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<hr class="half-width">
<p>Now we have a grasp of the steps needed to capture the package layer
of the computational environment, so let’s get started with
<code>venv</code> and <code>pip</code>.</p>
</section><section><h2 class="section-heading" id="creating-a-new-virtual-environment">Creating a new Virtual Environment<a class="anchor" aria-label="anchor" href="#creating-a-new-virtual-environment"></a>
</h2>
<hr class="half-width">
<p>We can set up a new virtual environment anywhere, but it’s generally
considered good practice to set it up in the folder for your
project.</p>
<p>So let’s start by creating a directory for our project using the
terminal, and the moving into it.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">mkdir</span> my-new-project</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="bu">cd</span> my-new-project</span></code></pre>
</div>
<p>Now we can create our virtual environment using the <code>venv</code>
module:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> venv .venv</span></code></pre>
</div>

<p>If we view the contents of the <code>my-new-project</code> directory
by using <code>ls</code> (for Windows) or <code>ls -a</code> (for MacOS
/Linux), we should see that there is now a <code>.venv</code>
sub-directory.</p>
<div id="what-should-i-call-my-virtual-environment-directory" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="what-should-i-call-my-virtual-environment-directory" class="callout-inner">
<h3 class="callout-title">What should I call my virtual environment directory?</h3>
<div class="callout-content">
<p>You can call the directory that contains the virtual environment
whatever you like, but the two conventional names are <code>venv</code>
and <code>.venv</code>.</p>
<p>The primary difference between these two is that the <code>.</code>
at the start of <code>.venv</code> indicates to MacOS and Linux-based
operating systems that this directory should be hidden when you view the
parent directory (i.e. <code>my-new-project</code>).</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="activating-the-new-virtual-environment">Activating the new virtual environment<a class="anchor" aria-label="anchor" href="#activating-the-new-virtual-environment"></a>
</h2>
<hr class="half-width">
<p>Now you’ve created the virtual environment you’re ready to start
installing packages, right?</p>
<p>Not quite, the next step is activating the environment. Effectively
telling your operating system that it should be using the Python
interpreter in your new virtual environment, rather than the one in the
base environment. We’ll see why this is important later.</p>
<p>The command you use to do this will depend on the OS you are
using:</p>
<div class="tabs">
<nav><div id="nav-tab-1" class="nav nav-tabs" role="tablist">
<button class="nav-link active" id="nav-tab-1-1" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-1-1" type="button" role="tab" aria-controls="nav-tabpanel-1-1" aria-selected="true">
  <h3 class="tab-header" id="nav-tab-heading-1-1">
  Windows
  </h3>
</button>
<button class="nav-link" id="nav-tab-1-2" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-1-2" type="button" role="tab" aria-controls="nav-tabpanel-1-2" aria-selected="false">
  <h3 class="tab-header" id="nav-tab-heading-1-2">
  MacOS/Linux
  </h3>
</button>
</div>
</nav><div id="nav-tabContent-1" class="tab-content">
<div id="nav-tabpanel-1-1" class="tab-pane show active" aria-labelledby="nav-tab-1-1" role="tabpanel">
<p><code>.venv/Scripts/activate</code></p>
</div>
<div id="nav-tabpanel-1-2" class="tab-pane" aria-labelledby="nav-tab-1-2" role="tabpanel">
<p><code>source .venv/bin/activate</code></p>
</div>
</div>
</div>
<p>Once you’ve done this you should see a prompt with name of you
environment appear on the left of your console, e.g:</p>
<div class="tabs">
<nav><div id="nav-tab-2" class="nav nav-tabs" role="tablist">
<button class="nav-link active" id="nav-tab-2-1" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-2-1" type="button" role="tab" aria-controls="nav-tabpanel-2-1" aria-selected="true">
  <h3 class="tab-header" id="nav-tab-heading-2-1">
  Windows
  </h3>
</button>
<button class="nav-link" id="nav-tab-2-2" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-2-2" type="button" role="tab" aria-controls="nav-tabpanel-2-2" aria-selected="false">
  <h3 class="tab-header" id="nav-tab-heading-2-2">
  MacOS/Linux
  </h3>
</button>
</div>
</nav><div id="nav-tabContent-2" class="tab-content">
<div id="nav-tabpanel-2-1" class="tab-pane show active" aria-labelledby="nav-tab-2-1" role="tabpanel">
<p><code>(.venv) PS C:\Users\Daniel\Projects\my-new-project&gt;</code></p>
</div>
<div id="nav-tabpanel-2-2" class="tab-pane" aria-labelledby="nav-tab-2-2" role="tabpanel">
<p><code>(.venv) dan@DCS032157:~/my-new-project$</code></p>
</div>
</div>
</div>
<p>Now you are ready to start installing packages for your project.</p>
<div id="prompt-name-blues" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="prompt-name-blues" class="callout-inner">
<h3 class="callout-title">Prompt name blues</h3>
<div class="callout-content">
<p>If you called the directory you created your environment
<code>.venv</code> you’ll notice that the name of the environment
displayed in your console is the same. This isn’t very informative,
especially if you’re switching between multiple projects (are you sure
you’re installing that package in the right <code>.venv</code>?)</p>
<p>By defult this name is the same name you gave to the directory
contianing the virtual environment, so you could address this by giving
the directory a different name e.g.:
<code>python -m venv my-new-project-venv</code>, and this will be
reflected in the console:</p>
<div class="tabs">
<nav><div id="nav-tab-3" class="nav nav-tabs" role="tablist">
<button class="nav-link active" id="nav-tab-3-1" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-3-1" type="button" role="tab" aria-controls="nav-tabpanel-3-1" aria-selected="true">
  <h3 class="tab-header" id="nav-tab-heading-3-1">
  Windows
  </h3>
</button>
<button class="nav-link" id="nav-tab-3-2" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-3-2" type="button" role="tab" aria-controls="nav-tabpanel-3-2" aria-selected="false">
  <h3 class="tab-header" id="nav-tab-heading-3-2">
  MacOS/Linux
  </h3>
</button>
</div>
</nav><div id="nav-tabContent-3" class="tab-content">
<div id="nav-tabpanel-3-1" class="tab-pane show active" aria-labelledby="nav-tab-3-1" role="tabpanel">
<p><code>(my-new-project-venv) PS C:\Users\Daniel\Projects\my-new-project&gt;</code></p>
</div>
<div id="nav-tabpanel-3-2" class="tab-pane" aria-labelledby="nav-tab-3-2" role="tabpanel">
<p><code>(my-new-project-venv) dan@DCS032157:~/my-new-project$</code></p>
</div>
</div>
</div>
<p>However, this does mean you have to remember the name you gave to the
virtual environment for each project. Not the end of the world, but a
bit annoying.</p>
<div class="section level4">
<h4 id="prompt-to-the-rescue">
<code>--prompt</code> to the rescue<a class="anchor" aria-label="anchor" href="#prompt-to-the-rescue"></a>
</h4>
<p>Handily, <code>venv</code> gives you the option to customise the text
in the console for each project:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> venv .venv <span class="at">--prompt</span> my-new-project</span></code></pre>
</div>
<p>Which will set the virtual environment directory name to
<code>venv</code>, and the console prompt to
<code>my-new-project</code>:</p>
<div class="tabs">
<nav><div id="nav-tab-4" class="nav nav-tabs" role="tablist">
<button class="nav-link active" id="nav-tab-4-1" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-4-1" type="button" role="tab" aria-controls="nav-tabpanel-4-1" aria-selected="true">
  <h3 class="tab-header" id="nav-tab-heading-4-1">
  Windows
  </h3>
</button>
<button class="nav-link" id="nav-tab-4-2" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-4-2" type="button" role="tab" aria-controls="nav-tabpanel-4-2" aria-selected="false">
  <h3 class="tab-header" id="nav-tab-heading-4-2">
  MacOS/Linux
  </h3>
</button>
</div>
</nav><div id="nav-tabContent-4" class="tab-content">
<div id="nav-tabpanel-4-1" class="tab-pane show active" aria-labelledby="nav-tab-4-1" role="tabpanel">
<p><code>(my-new-project) PS C:\Users\Daniel\Projects\my-new-project&gt;</code></p>
</div>
<div id="nav-tabpanel-4-2" class="tab-pane" aria-labelledby="nav-tab-4-2" role="tabpanel">
<p><code>(my-new-project) dan@DCS032157:~/my-new-project$</code></p>
</div>
</div>
</div>
<p>You can even use the name of the current directory without having to
type it out:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> venv .venv <span class="at">--prompt</span> .</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="deactivating-the-current-virtual-environment">Deactivating the current virtual environment<a class="anchor" aria-label="anchor" href="#deactivating-the-current-virtual-environment"></a>
</h2>
<hr class="half-width">
<p>Deactivating the currently activated virtual environment and
returning to using the base environment is as simple as using the
deactivate command:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">deactivate</span></span></code></pre>
</div>
<p>If you want to reactivate the environment then just follow the steps
to activate it, no need to create a new one.</p>
<div id="your-turn-1" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="your-turn-1" class="callout-inner">
<h3 class="callout-title">Your Turn 1</h3>
<div class="callout-content">
<p>Create a new project folder, create a new virtual environment inside
it, and activate that virtual environment.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="using-your-virtual-environment">Using your Virtual Environment<a class="anchor" aria-label="anchor" href="#using-your-virtual-environment"></a>
</h2>
<hr class="half-width">
<p>Now you have a virtual environment set up for your project, let’s
start using it.</p>
<div class="section level3">
<h3 id="installing-packages-into-the-virtual-environment">Installing packages into the Virtual Environment<a class="anchor" aria-label="anchor" href="#installing-packages-into-the-virtual-environment"></a>
</h3>
<p>First let’s reactivate our virtual environment if it’s not already
active:</p>
<div class="tabs">
<nav><div id="nav-tab-5" class="nav nav-tabs" role="tablist">
<button class="nav-link active" id="nav-tab-5-1" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-5-1" type="button" role="tab" aria-controls="nav-tabpanel-5-1" aria-selected="true">
  <h3 class="tab-header" id="nav-tab-heading-5-1">
  Windows
  </h3>
</button>
<button class="nav-link" id="nav-tab-5-2" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-5-2" type="button" role="tab" aria-controls="nav-tabpanel-5-2" aria-selected="false">
  <h3 class="tab-header" id="nav-tab-heading-5-2">
  MacOS/Linux
  </h3>
</button>
</div>
</nav><div id="nav-tabContent-5" class="tab-content">
<div id="nav-tabpanel-5-1" class="tab-pane show active" aria-labelledby="nav-tab-5-1" role="tabpanel">
<p><code>venv/Scripts/activate</code></p>
</div>
<div id="nav-tabpanel-5-2" class="tab-pane" aria-labelledby="nav-tab-5-2" role="tabpanel">
<p><code>source venv/bin/activate</code></p>
</div>
</div>
</div>
<p>Now we can install packages using <code>pip</code> as we would
usually, e.g:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pip install emoji</span></code></pre>
</div>
<p>Which will install the latest available version of the
<code>emoji</code> package to our environment.</p>
<p>You can check what is installed in your current environment by
running:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pip list</span></code></pre>
</div>
<pre><code>Package Version
------- -------
emoji   2.14.0
pip     24.2</code></pre>
<p>You can also have a go at importing the package and running the code
below:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="im">import</span> emoji</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="bu">print</span>(emoji.emojize(<span class="st">'Python is :thumbs_up:'</span>))</span></code></pre>
</div>
<div id="your-turn-2" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="your-turn-2" class="callout-inner">
<h3 class="callout-title">Your turn 2</h3>
<div class="callout-content">
<p>Try installing and using a different package
(e.g. <code>numpy</code>, <code>pandas</code>,
<code>pillow</code>).<br>
Try using <code>python -m pip list</code> when your virtual environment
is activated to see if the package is availble in your
environment.<br>
What happens if you deactivate you environment and use
<code>python -m pip list</code>?</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="the-nuts-and-bolts-of-virtual-environments">The nuts and bolts of Virtual environments<a class="anchor" aria-label="anchor" href="#the-nuts-and-bolts-of-virtual-environments"></a>
</h2>
<hr class="half-width">
<p>At this point you may be wondering what is going on behind the scenes
to make this all work. So, lets take a brief detour to give you an
idea.</p>
<div class="section level3">
<h3 id="peeking-inside--venv">Peeking inside .venv<a class="anchor" aria-label="anchor" href="#peeking-inside--venv"></a>
</h3>
<p>Lets start by looking in the <code>venv</code> directory in your
project. The contents will be slightly different depending on your
operating system:</p>
<div class="tabs">
<nav><div id="nav-tab-6" class="nav nav-tabs" role="tablist">
<button class="nav-link active" id="nav-tab-6-1" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-6-1" type="button" role="tab" aria-controls="nav-tabpanel-6-1" aria-selected="true">
  <h3 class="tab-header" id="nav-tab-heading-6-1">
  Windows
  </h3>
</button>
<button class="nav-link" id="nav-tab-6-2" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-6-2" type="button" role="tab" aria-controls="nav-tabpanel-6-2" aria-selected="false">
  <h3 class="tab-header" id="nav-tab-heading-6-2">
  MacOS/Linux
  </h3>
</button>
</div>
</nav><div id="nav-tabContent-6" class="tab-content">
<div id="nav-tabpanel-6-1" class="tab-pane show active" aria-labelledby="nav-tab-6-1" role="tabpanel">
<pre><code>📂 my-new-project/
└── 📂 venv/
    ├── 📂 Include/
    ├── 📂 Lib/
    |   └── 📂 site-packages/
    ├── 📂 Scripts/
    |   ├── 📄 activate.bat
    |   ├── 📄 deactivate.bat
    |   ├── 📄 pip.exe
    |   ├── 📄 python.exe
    |   └── ...
    └── 📄 pyvenv.cfg</code></pre>
<p>The sub-directories of interest here are:<br>
- <code>Scripts</code>, which contains the files used to
activate/deactivate the virtual environment, as well as a copy of Python
and Pip<br>
- <code>Lib</code>, which contains all the packages you have installed
within the virtual envoronment (although ususlly nested within
sub-directories, e.g. <code>Lib/site-packages/</code>)</p>
</div>
<div id="nav-tabpanel-6-2" class="tab-pane" aria-labelledby="nav-tab-6-2" role="tabpanel">
<pre><code>📂 my-new-project/
└── 📂 venv/
    ├── 📂 bin/
    |   ├── 📄 activate
    |   ├── 📄 pip
    |   ├── 📄 python
    |   └── ...
    ├── 📂 include/
    ├── 📂 lib/
    |   └── 📂 python3.12/
    |       └── 📂 site-packages/
    └── 📄 pyvenv.cfg</code></pre>
<p>The sub-directories of interest here are:<br>
- <code>bin</code>, which contains the files used to activate/deactivate
the virtual environment, as well as a copy of Python and Pip<br>
- <code>lib</code>, which contains all the packages you have installed
within the virtual envoronment (although ususlly nested within
sub-directories, e.g. <code>lib/python3.12/site-packages/</code>)</p>
</div>
</div>
</div>
<p>So, when you set up the virtual environment <code>venv</code> will
(amongst other things):<br>
- create a copy of the Python interpreter (and <code>pip</code>) in the
<code>venv</code> directory<br>
- create a place where it can install packages, and<br>
- setup some files that allow the virtual environment to be activated
and deactivated</p>
<p>But you now have two Python executables on your computer (at least),
how does you computer know which one to use within the virtual
environment?</p>
</div>
<div class="section level3">
<h3 id="the-path-to-python">The path to Python<a class="anchor" aria-label="anchor" href="#the-path-to-python"></a>
</h3>
<p>To explain this we need to introduce environmental variables, and
specifically the <code>PATH</code> environmental variable.<br>
Environmental variables are values held by your Operating System which
tell the Operating System and installed programs how to behave.<br>
One of the more common ones that you may come across is the
<code>PATH</code> variable which, in essence, is a is a list of places
that your computer will check for executables.<br>
So, when you run <code>Python</code> in the console your computer will
go through this list of places, get the location of the Python
executables on your system, and then run Python from the first place it
finds that executable.</p>
<p>You can see what directories are in your PATH variable by
running:</p>
<div class="tabs">
<nav><div id="nav-tab-7" class="nav nav-tabs" role="tablist">
<button class="nav-link active" id="nav-tab-7-1" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-7-1" type="button" role="tab" aria-controls="nav-tabpanel-7-1" aria-selected="true">
  <h3 class="tab-header" id="nav-tab-heading-7-1">
  Windows
  </h3>
</button>
<button class="nav-link" id="nav-tab-7-2" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-7-2" type="button" role="tab" aria-controls="nav-tabpanel-7-2" aria-selected="false">
  <h3 class="tab-header" id="nav-tab-heading-7-2">
  MacOS/Linux
  </h3>
</button>
</div>
</nav><div id="nav-tabContent-7" class="tab-content">
<div id="nav-tabpanel-7-1" class="tab-pane show active" aria-labelledby="nav-tab-7-1" role="tabpanel">
<p><code>$env:path</code></p>
<p>To make the output a bit more human readable (one line per directory)
use:<br><code>$env:path -split ';'</code></p>
</div>
<div id="nav-tabpanel-7-2" class="tab-pane" aria-labelledby="nav-tab-7-2" role="tabpanel">
<p><code>echo $PATH</code></p>
<p>To make the output a bit more human readable (one line per directory)
use:<br><code>echo -e ${PATH//:/\\n}</code></p>
</div>
</div>
</div>
<p>You can also see the locations of a specific executable on the PATH
by running:</p>
<div class="tabs">
<nav><div id="nav-tab-8" class="nav nav-tabs" role="tablist">
<button class="nav-link active" id="nav-tab-8-1" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-8-1" type="button" role="tab" aria-controls="nav-tabpanel-8-1" aria-selected="true">
  <h3 class="tab-header" id="nav-tab-heading-8-1">
  Windows
  </h3>
</button>
<button class="nav-link" id="nav-tab-8-2" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-8-2" type="button" role="tab" aria-controls="nav-tabpanel-8-2" aria-selected="false">
  <h3 class="tab-header" id="nav-tab-heading-8-2">
  MacOS/Linux
  </h3>
</button>
</div>
</nav><div id="nav-tabContent-8" class="tab-content">
<div id="nav-tabpanel-8-1" class="tab-pane show active" aria-labelledby="nav-tab-8-1" role="tabpanel">
<p><code>where.exe python</code></p>
</div>
<div id="nav-tabpanel-8-2" class="tab-pane" aria-labelledby="nav-tab-8-2" role="tabpanel">
<p><code>which -a python</code></p>
</div>
</div>
</div>
<div id="discussion3" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Challenge</h3>
<div class="callout-content">
<p>Run the above commands while your virtual environment is activated vs
deactivated.<br>
What differences do you see in the <code>PATH</code> variable, and the
list of Python locations?</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="pulling-it-together">Pulling it together<a class="anchor" aria-label="anchor" href="#pulling-it-together"></a>
</h3>
<p>The parts we’ve looked at in the last 2 sections give us a clearer
idea of what Python is doing when you create and activate a virtual
environment:</p>
<ol style="list-style-type: decimal">
<li>You run <code>python -m venv venv</code>:
<ul>
<li>A directory called <code>venv</code> is created<br>
</li>
<li>A standard directory structure is created within
<code>venv</code><br>
</li>
<li>A copy of Python, pip, and the activate/deactivate files are put in
a sub-directory of <code>venv</code> (where will depend on your OS)</li>
</ul>
</li>
<li>You activate the virtual environment:
<ul>
<li>The path to <code>venv</code> is added to start of the system’s
<code>PATH</code> environmental variable<br>
</li>
<li>The path to <code>site-packages</code> within <code>venv</code> is
added to the <code>PYTHONPATH</code> environmental variable
<ul>
<li>Not disucussed in detail but this is how Python knows where to
install/import packages</li>
</ul>
</li>
</ul>
</li>
<li>You deactivate the virtual environment:
<ul>
<li>The path to <code>venv</code> is removed from the start of the
system’s <code>PATH</code> environmental variable<br>
</li>
<li>The path to <code>site-packages</code> within <code>venv</code> is
removed from the <code>PYTHONPATH</code> environmental variable</li>
</ul>
</li>
</ol>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>You can create, activate, and deactivate virtual environments using
<code>venv</code>
</li>
<li>You can installing packages in a virtual environment using
<code>pip install</code>, and view installed packages with
<code>pip list</code>
</li>
<li>Python and <code>venv</code> create an directory on your computer
that contains your virtual environment ( a seperate Python interpreter
and library)</li>
<li>Activating and deactivating the virtual environment modifies the
<code>PATH</code> and <code>PYTHONPATH</code> environmental variables to
add/remove the path to the directory containing the virtual
environment.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</section></section><section id="aio-04-gen-reqs"><p>Content from <a href="04-gen-reqs.html">Using venv and pip to capture a computational environment</a></p>
<hr>
<p>Last updated on 2025-03-17 |

        <a href="https://github.com/ubdbra001/FAIR4RS-VirtualEnvs/edit/main/episodes/04-gen-reqs.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I use <code>venv</code> and <code>pip</code> to capture my
computational envrionments?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>How to specify specific versions of a package</li>
<li>Recording packages installed in an environment</li>
<li>Restoring packages to an environment</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Now we’ve got the basics of how to use <code>venv</code> to create a
virtual environment and then install packages to it, let’s move onto
using these tools to record and restore the packages we install.</p>
<section><h2 class="section-heading" id="specifying-specific-versions-for-a-package">Specifying specific versions for a package<a class="anchor" aria-label="anchor" href="#specifying-specific-versions-for-a-package"></a>
</h2>
<hr class="half-width">
<p>Before we start we have to address the question: What if we want to
install a specific version of a package for our project?<br>
Currently we have been using the command
<code>python -m pip install numpy</code>, but by default this will
install the latest version of <code>numpy</code>.<br>
Not particularly useful if we need to use anything other than the latest
version.</p>
<p>In this case we can use <a href="https://packaging.python.org/en/latest/specifications/version-specifiers/#id5" class="external-link">Version
Specifiers</a> to tell <code>pip</code> exactly which version we want to
install.</p>
<div id="accordionSpoiler1" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler1" aria-expanded="false" aria-controls="collapseSpoiler1">
  <h3 class="accordion-header" id="headingSpoiler1">
  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div>
  Software Versioning
  </h3>
</button>
<div id="collapseSpoiler1" class="accordion-collapse collapse" aria-labelledby="headingSpoiler1" data-bs-parent="#accordionSpoiler1">
<div class="accordion-body">
<p>Software Versioning is the practice of assigning an identifier to a
particular release or state of a piece of software. This allows you to
indicate what version of a particular bit of software you used to do
something (e.g. execute code, run an analysis, etc.)</p>
<div class="section level4">
<h4 id="semantic-versioning">Semantic versioning<a class="anchor" aria-label="anchor" href="#semantic-versioning"></a>
</h4>
<p>The primary versioning system used is called ‘<a href="https://semver.org" class="external-link">Semantic Versioning</a>’ and follows the
following pattern: Major.minor.patch<br>
For example, the version of Python I am currently using is 3.12.1, so it
has: - a major version of 3,<br>
- a minor version of 12, and<br>
- a patch version of 1</p>
</div>
<div class="section level4">
<h4 id="calendar-versioning">Calendar versioning<a class="anchor" aria-label="anchor" href="#calendar-versioning"></a>
</h4>
<p>An alternatetive, and lesser used system is called ‘<a href="https://calver.org" class="external-link">Calendar versioning</a>’ and follows the
following pattern: Year.month<br>
For example, the latest release of the Ubuntu operating system is:
24.10, indicating it was released in October 2024.</p>
<p>For more details about software versioning see the <a href="https://christopher-wild.github.io/FAIR4RS-Packaging/index.html" class="external-link">FAIR4RS
Packaging lesson</a></p>
</div>
</div>
</div>
</div>
</div>
<p>There are a whole range of different specifiers but the two most
useful in this case are:</p>
<ul>
<li><p><code>~=</code> - Compatible release</p></li>
<li><p><code>==</code> - Version match</p></li>
</ul>
<div class="section level3">
<h3 id="compatible-release">Compatible release<a class="anchor" aria-label="anchor" href="#compatible-release"></a>
</h3>
<p>This matches any version of the package that is expected to be
compatible with the version specified, e.g.:</p>
<ul>
<li><p><code>~= 3.1</code> will select version 3.1 or later, but not
version 4.0 or later</p></li>
<li><p><code>~= 3.1.2</code> will select version 3.1 or later, but not
version 3.2 or later</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="version-match">Version match<a class="anchor" aria-label="anchor" href="#version-match"></a>
</h3>
<p>This matches a version of a package exactly, e.g.:</p>
<ul>
<li><p><code>== 3.1</code> will select version 3.1 (or 3.1.0), and no
other version.</p></li>
<li><p><code>== 3.1.*</code> will select any version that starts with
3.1, and is equivalent to <code>~= 3.1.0</code></p></li>
</ul>
<p>So if you wanted to install the latest version of <code>numpy</code>
version 1 you could use either:</p>
<pre><code>python -m pip install numpy~=1.0</code></pre>
<p>or</p>
<pre><code>python -m pip install numpy==1.*</code></pre>
<p>Version specifier are also used when we record the packages we’ve
used our project, which we’ll see next.</p>
</div>
</section><section><h2 class="section-heading" id="recording-the-packages-installed">Recording the packages installed<a class="anchor" aria-label="anchor" href="#recording-the-packages-installed"></a>
</h2>
<hr class="half-width">
<p>So far, we’ve seen how virtual environments can be used to isolate
the dependencies for each of our projects, but how do we ensure that
this environment can be recreated?</p>
<p>We’ve used <code>pip list</code> to see the packages we’ve installed
before, so maybe we could use this and copy everything listed into a
file?</p>
<p>As with a previous solution, this would work, but is manual and may
be prone to errors so it is better to get the computer to do this for
you. Also, pip lists all the packages available in your environment, not
just the ones you installed, which is not ideal.</p>
<p>Luckily we have <code>pip freeze</code>. <code>pip freeze</code> will
output a list of packages with version specifers for the packages you
installed in your venv. These can then be written to a file
(conventially called <code>requirements.txt</code>) that can then be
used to restore all the packages installed into a new environment.</p>
<pre><code>python -m pip freeze &gt; requirements.txt</code></pre>
<p>The <code>&gt;</code> symbol here can be read as: ‘write the output
of the command on the left into the file on the right’ (instead of
displaying it on screen)</p>
<p><strong>Note</strong>: <code>pip</code> will not automatically update
the <code>requirements.txt</code> file to include pacakges you install
after running <code>pip freeze</code>. So be sure to rerun it
periodically, and especially after you install new packages.</p>
<div id="discussion1" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Challenge</h3>
<div class="callout-content">
<p>Use <code>pip freeze</code> to record all the packages installed in
your virtual environment.<br>
Take a look at the <code>requirements.txt</code> file generated. What do
you notice?</p>
</div>
</div>
</div>
<div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p>Now you have a file that has captured the packages used in your
computational environment, you can put it under version control
alongside your code.<br>
This ensures that anyone who accesses your code can also recreate this
part of your computational environment.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="restoring-an-environment-from-a-requirements-txt-file">Restoring an environment from a <code>requirements.txt</code>
file<a class="anchor" aria-label="anchor" href="#restoring-an-environment-from-a-requirements-txt-file"></a>
</h2>
<hr class="half-width">
<p>Now recreating a project environment can be done in 3 steps:</p>
<ol style="list-style-type: decimal">
<li><p>Create a new environment</p></li>
<li><p>Activate the environment</p></li>
<li><p>Install the dependencies from <code>requirements.txt</code>:
<code>python -m pip install --requirement requirements.txt</code></p></li>
</ol>
<p>You should be familiar with how to do steps 1 and 2, and step 3 is a
small modification to how you’d typically install packages.</p>
<div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p>The <code>--requirement</code> option tells <code>pip</code> that you
are installing the packages from a file and to look in the file for the
specific package names and versions.<br>
This can be shortened to just <code>-r</code>.</p>
</div>
</div>
</div>
<div id="discussion2" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Challenge</h3>
<div class="callout-content">
<p><a href="files/requirements.txt">Here</a> is a requirements.txt file
from one of my projects.<br>
I’d like you to download it, and follow the steps above to recreate the
computational environment.<br>
(You may have to right click and select “Save file as…”)</p>
<p>What packages (names and versions) did I have installed in this
environment?<br>
Can you recreate this level of my computational environment?</p>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Package versions can be specified by using the semantic versioning
syntax (or, less commonly, the calendar versioning syntax).</li>
<li>
<code>pip freeze</code> can be used to get a list of installed
packages, and these can be written to a file.</li>
<li>Packages can be restored from a file produced by
<code>pip freeze</code> by using the <code>--requirement</code> option
with <code>pip install</code>.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-05-limitations"><p>Content from <a href="05-limitations.html">Limitations</a></p>
<hr>
<p>Last updated on 2025-03-17 |

        <a href="https://github.com/ubdbra001/FAIR4RS-VirtualEnvs/edit/main/episodes/05-limitations.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What are the limitations of <code>venv</code>?</li>
<li>What are the limitations of virtual environments more
generally?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>blah</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="specific-limitations-of-venv">Specific limitations of <code>venv</code>
<a class="anchor" aria-label="anchor" href="#specific-limitations-of-venv"></a>
</h2>
<hr class="half-width">
<p>While <code>venv</code> is a relatively simple option for setting up
and managing your virtual environments it does have some key
limitations:</p>
<ol style="list-style-type: decimal">
<li>Python version management</li>
<li>Automatically keeping track of installed packages</li>
</ol>
<div class="section level3">
<h3 id="python-version-management">1. Python version management<a class="anchor" aria-label="anchor" href="#python-version-management"></a>
</h3>
<p>There are differences between the different versions of Python. With
the most extreme example being the incompatibility between Python2 and
Python 3. Depending on the complexity of your code, changes between
version may not affect you, but it can be hard to tell without trying a
newer version. If you want to make your code truly reproducible you
should include some information about which version of Python you used
to produce your results.</p>
<p><code>venv</code> uses whichever version(s) of Python you have
installed on your machine, but neither <code>venv</code> or
<code>pip</code> records information about which version of Python you
are using.</p>
<p>It is, of course, possible to include this information with the
instructions on how to run your code, but as highlighted multiple times
it is better to have an automated solution.</p>
</div>
<div class="section level3">
<h3 id="automatically-keeping-track-of-installed-packages">2. Automatically keeping track of installed packages<a class="anchor" aria-label="anchor" href="#automatically-keeping-track-of-installed-packages"></a>
</h3>
<p>As shown, using <code>venv</code> with <code>pip</code> can create a
list of dependencies for your project, but this has to be created
manually and updated manually whenever you modify the dependencies for
your project.</p>
<p>Ideally this would be updated automatically as packages are added and
removed, so as to avoid any mistakes or forgetting to update it after
changes have been made.</p>
</div>
<div class="section level3">
<h3 id="solutions">Solutions<a class="anchor" aria-label="anchor" href="#solutions"></a>
</h3>
<p>There are quite a few different tools that have been developed to
deal with these issues. Out of these the ones available, I have found
most useful to be <a href="https://docs.anaconda.com/miniconda/" class="external-link"><code>conda</code></a>/ <a href="https://github.com/conda-forge/miniforge" class="external-link"><code>miniforge</code></a>
and <a href="https://docs.astral.sh/uv/" class="external-link"><code>uv</code></a>.<br>
These tools combine package, environment, and Python version management,
allowing you to do everything that <code>pip</code> and
<code>venv</code> do, while also being able to easily switch between
different Python versions. Both will also record the version of Python
used within an environment allowing you to capture both the ‘package’
and ‘language’ layers of your computational environment in one go.</p>
<p>There are some differences between them though:</p>
<p><code>conda</code>/<code>miniforge</code>:<br>
- Provide pre-compiled binaries for packages<br>
- Includes other languages (notably R)<br>
- They use their own package repositories, so may not be interoperable
with other Python tools without a bit of fiddling</p>
<p><code>uv</code>:<br>
- Uses same package repositories as <code>pip</code><br>
- Auto updating of environment dependencies file (equivalent to
<code>requirements.txt</code>)<br>
- Noticably faster for installing pacakges than <code>pip</code> or
<code>conda</code><br>
- Not reached a v1 release yet</p>
<p>Up until recently I have used <code>conda</code> to create and manage
my Python environments, however having given <code>uv</code> a try
recently I am considering using it on a more permanent basis.</p>
</div>
</section><section><h2 class="section-heading" id="general-limitations-of-virtual-environments">General limitations of virtual environments<a class="anchor" aria-label="anchor" href="#general-limitations-of-virtual-environments"></a>
</h2>
<hr class="half-width">
<p>Beyond the specific limitations of <code>venv</code>, virtual
environments in general have one key limitation:</p>
<ul>
<li>They are not able to control the underlying system they are working
within.</li>
</ul>
<p>If we go back to our diagram showing the different layers of your
computational environment, you can see that virtual environments only
address the layer of the environment immediately below your code.</p>
<figure><img src="files/PackageLayerCapture.png" class="figure mx-auto d-block"></figure><p>If you are using something like <code>conda</code>,
<code>miniforge</code> or <code>uv</code>, then you may be able to
extand that to the ‘language’ layer. But these tools are not able to
capture the ‘operating system’ layer.</p>
<p>Depending on the degree of computational reproducibility you are
looking for capturing the ‘package’ and ‘language’ layers may be enough.
However, if you are looking for byte-for-byte reproducibility you will
likely also want to capture as much of the computational environment as
possible, and so you will need to turn to other tools.</p>
</section><section><h2 class="section-heading" id="capturing-the-operating-system-layer">Capturing the operating system layer<a class="anchor" aria-label="anchor" href="#capturing-the-operating-system-layer"></a>
</h2>
<hr class="half-width">
<p>There are multiple different tools that can be used to capture the
layer below ‘package’/ ‘language’</p>
<div class="section level3">
<h3 id="virtual-machines">Virtual machines<a class="anchor" aria-label="anchor" href="#virtual-machines"></a>
</h3>
<p>This is one of the more commonly known tools for capturing and
replicating the ‘Operating System’ layer a computational environment.
Virtual machines (VMs) are effectively an emulation or virtualisation of
an operating within your own “host” operating system. For example, using
a virtual machine I can create and run a Windows XP operating system
within my Windows 10 machine. These can also be interacted with using
familiar point and click interfaces, and can be customised to access a
specific portion of the host machines CPU, memory, disk, etc.<br>
It is possible to take a snapshot of an exiting VM for distribution, or
use an <a href="https://en.wikipedia.org/wiki/Infrastructure_as_code" class="external-link">‘Infrastructure
as code’</a> tool such as <a href="https://docs.ansible.com/ansible/latest/index.html" class="external-link">Ansible</a> to
write a script to recreate a specific environment (e.g. install specific
software, etc)</p>
</div>
<div class="section level3">
<h3 id="containers">Containers<a class="anchor" aria-label="anchor" href="#containers"></a>
</h3>
<p>Containers are similar to Virtual machines in that they virtualise an
operating system, but containers are typically more lightweight than VMs
as they only contain software and files that are explicitly defined in
order to run the project contained within them.<br>
They also typically don’t have a GUI in the same way the OS on your
computer does (although some containers will provide an interface,
e.g. RStudio Server).<br>
If you want to create an environment on your machine and then run it on
something more powerful (like a HPC) then containers are a good way of
achiving this.</p>
</div>
<div class="section level3">
<h3 id="nixguix">Nix/Guix<a class="anchor" aria-label="anchor" href="#nixguix"></a>
</h3>
<p><a href="https://nixos.org" class="external-link">Nix(OS)</a> and <a href="https://guix.gnu.org" class="external-link">Guix</a> also provide a way of capturing the
computational environment below the ‘packages’ and ‘language’ layers,
but take a slightly different approach to this than VMs and
Containers.<br>
These are package managers based on the idea declarative configurations,
that is: “specify your setup with a programmable configuration file, and
then let the package manager arrange for the software available on the
system to reflect that”.<br>
This is similar to what <code>pip</code> is doing with the
<code>requirements.txt</code> file described previously, but for an
entire Operating system. However, this approach takes it one step
further by allowing multiple versions of the same package to exist on a
machine simultneously.<br>
For a more complete outline of this approach <a href="https://lwn.net/Articles/962788/" class="external-link">see this post</a></p>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-2">
        <a href="https://docs.hpc.shef.ac.uk/en/latest/stanage/index.html" class="external-link">
          <img alt="Stanage HPC" src="https://docs.hpc.shef.ac.uk/en/latest/_images/Stanage_Black.png" style="width: 100%;" class="dark-invert"></a>
        <p><a href="https://sites.google.com/sheffield.ac.uk/research-training/research-training" class="external-link">Research Computing Training Home</a></p>
			</div>
			<div class="col-md-5">
        <p>Lesson developed by <a href="https://rse.shef.ac.uk" class="external-link">RSE</a> &amp; <a href="https://www.sheffield.ac.uk/it-services/research" class="external-link">RIT</a></p>
        <p>

          <a href="https://github.com/ubdbra001/FAIR4RS-VirtualEnvs/edit/main/README.md" class="external-link">Edit on GitHub</a>


        | <a href="https://github.com/ubdbra001/FAIR4RS-VirtualEnvs/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/ubdbra001/FAIR4RS-VirtualEnvs/" class="external-link">Source</a>
        </p>
		<p>
          <a href="https://github.com/ubdbra001/FAIR4RS-VirtualEnvs/blob/main/CITATION.cff" class="external-link">Cite</a> | <a href="mailto:daniel.brady@sheffield.ac.uk">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a> | <a href="CODE_OF_CONDUCT.html">Code of Conduct</a>
        </p>
		</div>
		<div class="col-md-5">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>


        <!--<p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC-BY 4.0</a> by <a href="https://carpentries.org/">The Carpentries</a></p>-->
        <!--<p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.11">sandpaper (0.16.11)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9">pegboard (0.7.9)</a>, and <a href="https://github.com/RSE-Sheffield/uos-varnish/tree/main">varnish (1.0.4)</a></p>-->
        <p><a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">Template licensed under CC-BY 4.0</a> by <a href="https://carpentries.org" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.11" class="external-link">sandpaper (0.16.11)</a>,
        <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a>,
      and <a href="https://github.com/RSE-Sheffield/uos-varnish/tree/main" class="external-link">varnish (1.0.4) [UoS fork]</a>.</p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://ubdbra001.github.io/FAIR4RS-VirtualEnvs/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "FAIR4RS, University of Sheffield, Virtual Environments, Reproducibility",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://ubdbra001.github.io/FAIR4RS-VirtualEnvs/aio.html",
  "identifier": "https://ubdbra001.github.io/FAIR4RS-VirtualEnvs/aio.html",
  "dateCreated": "2024-08-13",
  "dateModified": "2025-03-17",
  "datePublished": "2025-03-17"
}

  </script><script>
		feather.replace();
	</script>
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

